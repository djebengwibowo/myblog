<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zakat Calculator Pro</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; color: #333; line-height: 1.6; padding: 20px; }
        .container { max-width: 900px; margin: auto; background: #fff; padding: 30px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1, h2 { color: #2c3e50; text-align: center; }
        .form-group { margin-bottom: 20px; padding: 15px; background: #fafafa; border: 1px solid #eee; border-radius: 5px; }
        label { display: block; font-weight: bold; margin-bottom: 8px; color: #34495e; }
        select, input[type="number"] { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; font-size: 16px; }
        button { width: 100%; padding: 14px; background: #27ae60; color: white; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; font-weight: bold; margin-top: 10px; transition: 0.3s; }
        button:hover { background: #219653; }
        .result-box { margin-top: 20px; padding: 20px; background: #e8f8f5; border-left: 5px solid #27ae60; display: none; }
        .dalil-box { margin-top: 20px; padding: 20px; background: #fdfefe; border: 1px solid #d5dbdb; border-radius: 5px; display: none; }
        .arabic { font-size: 26px; text-align: right; font-family: 'Amiri', 'Scheherazade', serif; margin-bottom: 10px; color: #2c3e50; direction: rtl; }
        .note { font-size: 0.9em; color: #7f8c8d; margin-top: 5px; }
        .radio-group { display: flex; gap: 15px; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h1 id="appTitle">Kalkulator Zakat Komprehensif</h1>

    <div class="form-group">
        <label id="lblLang" for="language">1. Pilih Bahasa / Select Language:</label>
        <select id="language" onchange="changeLanguage()">
            <option value="id">Bahasa Indonesia</option>
            <option value="en">English</option>
            <option value="zh">中文 (Chinese)</option>
            <option value="fr">Français (French)</option>
            <option value="es">Español (Spanish)</option>
            <option value="de">Deutsch (German)</option>
        </select>
    </div>

    <div class="form-group">
        <label id="lblType" for="zakatType">2. Pilih Jenis Zakat:</label>
        <select id="zakatType" onchange="toggleInputs()">
            <option value="">-- Pilih / Select --</option>
            <option value="emas_uang">1 & 2. Zakat Emas, Perak, Uang & Surat Berharga</option>
            <option value="tijarah">3. Zakat Perniagaan (Tijarah)</option>
            <option value="zuru">4. Zakat Pertanian (Zuru')</option>
            <option value="anam">5. Zakat Peternakan (An'am)</option>
            <option value="profesi">6. Zakat Profesi / Penghasilan</option>
            <option value="rikaz">7. Zakat Barang Temuan (Rikaz)</option>
            <option value="tambang">8. Zakat Hasil Tambang (Ma'din)</option>
            <option value="fitrah">9. Zakat Fitrah</option>
        </select>
    </div>

    <div id="inputsContainer">
        
        <div id="inputStandard" class="form-group" style="display:none;">
            <label id="lblStandardValue">Masukkan Total Nilai Harta (Uang/Aset/Emas/Temuan):</label>
            <input type="number" id="standardValue" placeholder="0">
            <div class="note" id="noteStandard">Pastikan harta telah mencapai nisab dan haul (jika disyaratkan).</div>
        </div>

        <div id="inputPertanian" class="form-group" style="display:none;">
            <label id="lblTaniValue">Masukkan Nilai / Estimasi Harga Panen:</label>
            <input type="number" id="taniValue" placeholder="0">
            <label id="lblIrigasi" style="margin-top:15px;">Jenis Pengairan / Irigasi:</label>
            <div class="radio-group">
                <input type="radio" id="irigasiAlami" name="irigasi" value="0.10" checked>
                <label for="irigasiAlami" id="lblAlami">Alami (Tadah Hujan / Sungai) - 10%</label>
                
                <input type="radio" id="irigasiBuatan" name="irigasi" value="0.05">
                <label for="irigasiBuatan" id="lblBuatan">Buatan (Irigasi Berbiaya) - 5%</label>
            </div>
            <div class="note" id="noteTani">Nisab: Setara 653 kg gabah kering / 520 kg beras. Tanpa Haul.</div>
        </div>

        <div id="inputTernak" class="form-group" style="display:none;">
            <label id="lblTernakType">Pilih Jenis Hewan Ternak:</label>
            <select id="ternakType">
                <option value="kambing">Kambing / Domba</option>
                <option value="sapi">Sapi / Kerbau</option>
            </select>
            <label id="lblTernakCount" style="margin-top:15px;">Jumlah Ekor Hewan:</label>
            <input type="number" id="ternakCount" placeholder="0">
            <div class="note" id="noteTernak">Syarat: Digembalakan di padang rumput umum dan mencapai haul.</div>
        </div>

        <div id="inputFitrah" class="form-group" style="display:none;">
            <label id="lblFitrahPerson">Jumlah Anggota Keluarga:</label>
            <input type="number" id="personCount" placeholder="0">
            <label id="lblFitrahPrice" style="margin-top:15px;">Harga Beras/Makanan Pokok per Kg:</label>
            <input type="number" id="ricePrice" placeholder="0">
        </div>

    </div>

    <button id="btnCalculate" onclick="calculateZakat()">Hitung Zakat</button>

    <div id="resultBox" class="result-box">
        <h2 id="resTitle">Hasil Penghitungan</h2>
        <p><strong id="resFormulaTxt">Rumus / Kadar:</strong> <span id="resFormula"></span></p>
        <p><strong id="resTotalTxt">Total Kewajiban Zakat:</strong> <span id="resTotal" style="font-size: 22px; color: #27ae60; font-weight:bold;"></span></p>
    </div>

    <div id="dalilBox" class="dalil-box">
        <h2 id="dalilTitle">Dalil Al-Quran & Hadits</h2>
        <div id="dalilContent"></div>
    </div>

</div>

<script>
    // Dictionary disederhanakan untuk UI utama
    const dict = {
        'id': { title: "Kalkulator Zakat Komprehensif", btn: "Hitung Zakat", resTitle: "Hasil Penghitungan", resForm: "Kadar / Rumus:", resTot: "Total Zakat:", dalil: "Dalil Al-Quran & Hadits" },
        'en': { title: "Comprehensive Zakat Calculator", btn: "Calculate Zakat", resTitle: "Calculation Result", resForm: "Rate / Formula:", resTot: "Total Zakat Due:", dalil: "Quran & Hadith Evidences" },
        'zh': { title: "综合天课计算器", btn: "计算天课", resTitle: "计算结果", resForm: "比率/公式:", resTot: "应付天课总额:", dalil: "古兰经和圣训证据" },
        'fr': { title: "Calculatrice de Zakat Complète", btn: "Calculer la Zakat", resTitle: "Résultat du Calcul", resForm: "Taux / Formule:", resTot: "Zakat Totale:", dalil: "Preuves Coran & Hadith" },
        'es': { title: "Calculadora de Zakat Completa", btn: "Calcular Zakat", resTitle: "Resultado del Cálculo", resForm: "Tasa / Fórmula:", resTot: "Zakat Total:", dalil: "Evidencias Corán y Hadiz" },
        'de': { title: "Umfassender Zakat-Rechner", btn: "Zakat Berechnen", resTitle: "Berechnungsergebnis", resForm: "Rate / Formel:", resTot: "Gesamte Zakat:", dalil: "Koran & Hadith Beweise" }
    };

    function changeLanguage() {
        const lang = document.getElementById("language").value;
        document.getElementById("appTitle").innerText = dict[lang].title;
        document.getElementById("btnCalculate").innerText = dict[lang].btn;
        document.getElementById("resTitle").innerText = dict[lang].resTitle;
        document.getElementById("resFormulaTxt").innerText = dict[lang].resForm;
        document.getElementById("resTotalTxt").innerText = dict[lang].resTot;
        document.getElementById("dalilTitle").innerText = dict[lang].dalil;
    }

    function hideAllInputs() {
        document.getElementById("inputStandard").style.display = "none";
        document.getElementById("inputPertanian").style.display = "none";
        document.getElementById("inputTernak").style.display = "none";
        document.getElementById("inputFitrah").style.display = "none";
        document.getElementById("resultBox").style.display = "none";
        document.getElementById("dalilBox").style.display = "none";
    }

    function toggleInputs() {
        hideAllInputs();
        const type = document.getElementById("zakatType").value;
        
        if (["emas_uang", "tijarah", "profesi", "rikaz", "tambang"].includes(type)) {
            document.getElementById("inputStandard").style.display = "block";
        } else if (type === "zuru") {
            document.getElementById("inputPertanian").style.display = "block";
        } else if (type === "anam") {
            document.getElementById("inputTernak").style.display = "block";
        } else if (type === "fitrah") {
            document.getElementById("inputFitrah").style.display = "block";
        }
    }

    function calculateZakat() {
        const type = document.getElementById("zakatType").value;
        if (!type) { alert("Silakan pilih jenis zakat terlebih dahulu."); return; }

        let formulaText = "";
        let resultText = "";
        let dalilHTML = "";

        // Logika 2.5% (Emas, Uang, Tijarah, Profesi, Tambang)
        if (["emas_uang", "tijarah", "profesi", "tambang"].includes(type)) {
            const val = parseFloat(document.getElementById("standardValue").value);
            if (!val || val <= 0) return alert("Masukkan nilai yang valid.");
            
            const zakat = val * 0.025;
            formulaText = `2.5% x ${val.toLocaleString()}`;
            resultText = zakat.toLocaleString();

            dalilHTML = `
                <div class="arabic">خُذْ مِنْ اَمْوَالِهِمْ صَدَقَةً تُطَهِّرُهُمْ وَتُزَكِّيْهِمْ بِهَا</div>
                <p><strong>QS. At-Tawbah: 103</strong> - "Ambillah zakat dari sebagian harta mereka, dengan zakat itu kamu membersihkan dan mensucikan mereka..."</p>
                <p>Kadar wajib untuk harta simpanan, niaga, dan penghasilan adalah <strong>2.5% (1/40)</strong> setelah mencapai nisab.</p>
            `;
        } 
        // Logika Rikaz (20%)
        else if (type === "rikaz") {
            const val = parseFloat(document.getElementById("standardValue").value);
            if (!val || val <= 0) return alert("Masukkan nilai yang valid.");
            
            const zakat = val * 0.20;
            formulaText = `20% (Seperlima) x ${val.toLocaleString()}`;
            resultText = zakat.toLocaleString();

            dalilHTML = `
                <div class="arabic">وَفِي الرِّكَازِ الْخُمُسُ</div>
                <p><strong>Hadits Riwayat Bukhari & Muslim</strong> - "Dan pada harta rikaz (temuan/karun) wajib dikeluarkan zakatnya sebesar seperlima (20%)."</p>
                <p>Tidak disyaratkan haul, wajib dibayar segera saat ditemukan.</p>
            `;
        }
        // Logika Pertanian (10% atau 5%)
        else if (type === "zuru") {
            const val = parseFloat(document.getElementById("taniValue").value);
            const rate = parseFloat(document.querySelector('input[name="irigasi"]:checked').value);
            if (!val || val <= 0) return alert("Masukkan nilai panen yang valid.");

            const zakat = val * rate;
            formulaText = `${rate * 100}% x ${val.toLocaleString()}`;
            resultText = zakat.toLocaleString();

            dalilHTML = `
                <div class="arabic">وَآتُوا حَقَّهُ يَوْمَ حَصَادِهِ</div>
                <p><strong>QS. Al-An'am: 141</strong> - "...dan tunaikanlah haknya (zakatnya) di hari memetik hasilnya (panen)..."</p>
                <p><strong>Hadits Bukhari:</strong> "Tanaman yang disirami oleh hujan atau mata air, zakatnya sepersepuluh (10%). Sedangkan yang disirami dengan menggunakan tenaga/biaya, zakatnya seperdua puluh (5%)."</p>
            `;
        }
        // Logika Peternakan (Sederhana berdasarkan Nisab awal)
        else if (type === "anam") {
            const ternakType = document.getElementById("ternakType").value;
            const count = parseInt(document.getElementById("ternakCount").value);
            if (!count || count <= 0) return alert("Masukkan jumlah ekor yang valid.");

            if (ternakType === "kambing") {
                if (count < 40) { resultText = "0 (Belum mencapai nisab 40 ekor)"; formulaText = "Nisab Kambing minimal 40 ekor"; }
                else if (count >= 40 && count <= 120) { resultText = "1 Ekor Kambing/Domba"; formulaText = "Kelompok 40 - 120 ekor"; }
                else if (count >= 121 && count <= 200) { resultText = "2 Ekor Kambing/Domba"; formulaText = "Kelompok 121 - 200 ekor"; }
                else { resultText = `${Math.floor(count / 100) + 1} Ekor Kambing`; formulaText = "Setiap kelipatan 100 ekor ditambah 1 ekor"; }
            } else if (ternakType === "sapi") {
                if (count < 30) { resultText = "0 (Belum mencapai nisab 30 ekor)"; formulaText = "Nisab Sapi minimal 30 ekor"; }
                else { 
                    const tabi = Math.floor(count / 30);
                    resultText = `Minimal ${tabi} Ekor Tabi' (Sapi umur 1 tahun)`; 
                    formulaText = "Setiap 30 ekor sapi = 1 Tabi', setiap 40 ekor = 1 Musinnah (umur 2 thn)"; 
                }
            }

            dalilHTML = `
                <p><strong>Hadits Riwayat Bukhari dan Abu Dawud:</strong></p>
                <p>Nisab peternakan berlaku untuk hewan yang digembalakan di tempat umum (Sa'imah) untuk berkembang biak atau diambil susunya, bukan hewan pekerja. Nisab kambing adalah 40 ekor, dan nisab sapi adalah 30 ekor.</p>
            `;
        }
        // Logika Fitrah
        else if (type === "fitrah") {
            const persons = parseInt(document.getElementById("personCount").value);
            const price = parseFloat(document.getElementById("ricePrice").value);
            if (!persons || !price) return alert("Masukkan data valid.");

            const zakat = persons * 2.5 * price;
            formulaText = `${persons} Orang x 2.5 Kg x ${price.toLocaleString()}`;
            resultText = zakat.toLocaleString();

            dalilHTML = `
                <div class="arabic">فَرَضَ رَسُولُ اللَّهِ ﷺ زَكَاةَ الْفِطْرِ صَاعًا مِنْ تَمْرٍ أَوْ صَاعًا مِنْ شَعِيرٍ</div>
                <p><strong>Hadits Riwayat Bukhari & Muslim:</strong> "Rasulullah ﷺ mewajibkan zakat fitrah, berupa satu sha’ kurma atau gandum..." (Setara 2.5 - 2.7 kg makanan pokok).</p>
            `;
        }

        document.getElementById("resFormula").innerText = formulaText;
        document.getElementById("resTotal").innerText = resultText;
        document.getElementById("dalilContent").innerHTML = dalilHTML;
        
        document.getElementById("resultBox").style.display = "block";
        document.getElementById("dalilBox").style.display = "block";
    }
</script>
</body>
</html>